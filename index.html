<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>@nougaki 空中アドバルーン生成</title>
  <style>
    body {font-family:sans-serif;padding:20px;background:#e6f7ff;text-align:center;}
    .box {background:white;padding:20px;margin:auto;max-width:500px;border-radius:12px;}
    input,select,button {padding:12px;margin:8px 0;width:100%;border-radius:8px;}
    button {background:#d40000;color:white;font-weight:bold;}
    #result {display:none;}
    #qrImg {width:180px;margin:15px auto;}
  </style>
</head>
<body>
  <div class="box">
    <h1>@nougaki 空中アドバルーン生成</h1>
    <p><strong>β版テスト中</strong></p>
    <select id="city"><option selected>練馬区</option></select>
    <input id="name" placeholder="店舗名" value="テスト店舗">
    <input id="url" placeholder="店舗URL" value="https://skabra.co.jp/">
    <input id="address" placeholder="住所" value="東京都練馬区">
    <button onclick="generate()">生成する！</button>
  </div>

  <div id="result" class="box">
    <h3>生成完了！</h3>
    <p>公開URL：<a id="pageURL" target="_blank"></a></p>
    <img id="qrImg">
    <p><button onclick="sendMail()">メール送信</button></p>
  </div>

  <script>
    function generate() {
      let name = document.getElementById('name').value.trim();
      if (!name) name = 'テスト店舗';  // 空なら強制
      const file = name.replace(/[^a-zA-Z0-9]/g,'_') || 'test';  // 空なら 'test'
      const url = 'https://nougaki.github.io/sukabura/' + file + '_balloon.html';
      document.getElementById('pageURL').href = url;
      document.getElementById('pageURL').textContent = url;
      document.getElementById('qrImg').src = 'https://api.qrserver.com/v1/create-qr-code/?size=512x512&data=' + encodeURIComponent(url);
      document.getElementById('result').style.display = 'block';
    }
    function sendMail() {
      window.location.href = 'mailto:aer-skabra@skabra.co.jp?subject=設置完了&body=URL: ' + document.getElementById('pageURL').href;
    }
  </script>
</body>
</html>
