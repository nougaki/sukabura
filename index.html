<!DOCTYPE html>
<html>
<head>
  <title>@nougaki 空中アドバルーン生成</title>
  <meta charset="utf-8">
  <style>
    body {font-family: sans-serif; padding: 20px; background: #f0f8ff; text-align: center;}
    .box {background: white; padding: 20px; margin: 15px auto; max-width: 500px; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);}
    input, select, button {padding: 12px; margin: 8px 0; width: 100%; font-size: 16px; border-radius: 8px; border: 1px solid #ccc;}
    button {background: #d40000; color: white; font-weight: bold; border: none; cursor: pointer;}
    #result {display: none;}
  </style>
</head>
<body>
  <div class="box">
    <h1>@nougaki 空中アドバルーン生成</h1>
    <p><strong>β版テスト中</strong></p>
    <select id="city"><option selected>練馬区</option><!-- 他の区 --></select>
    <input type="text" id="name" placeholder="店舗名" value="テスト店舗">
    <input type="text" id="url" placeholder="店舗URL" value="https://skabra.co.jp/">
    <input type="text" id="address" placeholder="住所" value="東京都練馬区">
    <button onclick="generate()">生成する！</button>
  </div>

  <div id="result" class="box">
    <h3>生成完了！</h3>
    <p><strong>公開URL：</strong><br><a id="pageURL" target="_blank"></a></p>
    <img id="qrImg">
    <p><button onclick="sendMail()">メール送信</button></p>
  </div>

  <script>
    function generate() {
      let name = document.getElementById('name').value.trim() || 'テスト店舗';
      const file = name.replace(/[^a-zA-Z0-9]/g, '_').substring(0,30) + '_balloon.html';
      const url = 'https://nougaki.github.io/sukabura/' + file;
      document.getElementById('pageURL').href = url;
      document.getElementById('pageURL').textContent = url;
      document.getElementById('qrImg').src = 'https://api.qrserver.com/v1/create-qr-code/?size=512x512&data=' + encodeURIComponent(url);
      document.getElementById('result').style.display = 'block';
    }
    function sendMail() {
      window.location.href = 'mailto:aer-skabra@skabra.co.jp?subject=空中アドバルーン設置完了&body=URL: ' + document.getElementById('pageURL').href;
    }
  </script>
</body>
</html>
